/* ================================== */
/* === GLOBAL LAYOUT SAFETY       === */
/* ================================== */
*,
*::before,
*::after {
  box-sizing: border-box;
  min-width: 0;
}

html, body { height:100%; }

body {
  margin:0;
  padding:16px;
  background:var(--bg);
  color:var(--ink);
  font:13px/1.4 "Segoe UI",-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif;
  transition:background .2s,color .2s;
}

a { color:var(--link); text-decoration:none; }
a:hover { text-decoration:underline; }

/* ================================== */
/* === ORACLE THEME (DEFAULT)     === */
/* ================================== */
:root {
  --bg-main:#14181d; --bg-panel:#1f2329; --bg-input:#101216;
  --border-color:#333842; --text-primary:#d0d8e0; --text-secondary:#808a96; --text-muted:#5c6672;
  --accent-primary:#00aaff; --accent-secondary:#2a4c9b;
  --color-ok:#00c853; --color-err:#d50000; --color-warn:#ffab00; --color-info:#2aa7ff; --color-parse:#ff4081;

  /* XP colors adapted for dark */
  --xp-bg:#11361a; --axp-bg:#11263e; --sk-bg:#3e2a11; --rxp-bg:#2e133e;
  --xp-bar: var(--color-ok); --axp-bar: #60a5fa; --sk-bar:#c27b17;

  /* Xanalytics compatibility vars */
  --bg: var(--bg-main);
  --panel: var(--bg-panel);
  --face: var(--bg-panel);
  --ink: var(--text-primary);
  --muted: var(--text-secondary);
  --hi: var(--border-color);
  --lo: var(--bg-input);
  --shadow: rgba(0,0,0,0.5);
  --link: var(--accent-primary);
  --btn-active-bg: var(--accent-secondary);
}

/* main frame */
.window {
  background:var(--face);
  border:1px solid var(--hi);
  border-radius:10px;
  box-shadow: 0 8px 30px var(--shadow);

  /* make this behave like a real app panel, not a tiny card */
  width:100%;
  max-width:1400px;
  min-width:0;
  margin:0 auto;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* title/header bar */
.titlebar {
  background:linear-gradient(90deg, #101216, #1f2329);
  color:var(--text-primary);
  font-weight:bold;
  padding:8px 12px;
  display:flex;
  flex-wrap:wrap;
  row-gap:6px;
  align-items:center;
  column-gap:10px;
  border-bottom: 1px solid var(--hi);
  border-radius: 9px 9px 0 0;
}

.badge {
  background:var(--accent-primary);
  color:#fff;
  padding:2px 8px;
  border-radius:6px;
  font-weight:700;
  font-size:12px;
  white-space:nowrap;
}

.styleSwitch {
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:6px;
  flex-shrink:0;
}

.styleSwitch.small select {
  max-width:170px;
}

.content {
  padding:12px;
  width:100%;
  min-width:0;
}

/* responsive 2-col layout */
.grid {
  display:grid;
  grid-template-columns: 360px 1fr;
  gap:12px;
  align-items:start;
  width:100%;
  min-width:0;
}

@media (max-width:1100px) {
  .grid {
    grid-template-columns: 320px 1fr;
  }
}

@media (max-width:900px) {
  .grid {
    grid-template-columns: 1fr;
  }
}

/* panels / cards */
.group {
  background:var(--panel);
  padding:12px;
  border:1px solid var(--hi);
  border-radius:8px;
  margin-bottom:12px;
  min-width:0;          /* prevent overflow forcing column wider */
}

.group h3 {
  margin:0 0 10px 0;
  font-size:15px;
  font-weight:600;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid var(--hi);
  padding-bottom:8px;
  color:var(--text-primary);
  min-width:0;
}

.row {
  display:flex;
  align-items:center;
  gap:8px;
  margin:8px 0;
  flex-wrap:wrap;
  min-width:0;
}

.small {
  font-size:12px;
  color:var(--muted);
  word-break:break-word;
}

.mono { font-family:ui-monospace,Menlo,Consolas,monospace; }

.input,
select {
  background:var(--bg-input);
  color:var(--ink);
  border:1px solid var(--hi);
  padding:5px 8px;
  border-radius:6px;
  min-width:0;
  max-width:100%;
}

.input.w { width:160px; max-width:100%; }

.btn {
  background:#333842;
  color:var(--text-primary);
  border:1px solid #4a505a;
  padding:5px 10px;
  border-radius:6px;
  cursor:pointer;
  transition:background .2s;
  font-size:13px;
  line-height:1.2;
  white-space:nowrap;
}
.btn:hover { background:#4a505a; }
.btn:active { background:#5a606a; }
.btn.ghost { opacity:.7; }
.btn.alt { background:var(--accent-secondary); border-color:transparent; color:#fff; }
.btn.alt:hover { background:#3a5cab; }

/* dropzone */
.drop {
  display:flex;
  align-items:center;
  justify-content:center;
  height:76px;
  text-align:center;
  background:var(--bg-input);
  padding:6px;
  border-radius:6px;
  border:2px dashed var(--hi);
  cursor:pointer;
  transition:border-color .2s, background .2s;
  min-width:0;
}
.drop.dragover,
.drop:hover {
  border-color:var(--accent-primary);
  background:#2a2f38;
}

/* file/path info shouldnâ€™t blow layout */
.path {
  max-width:100%;
  word-break:break-all;
  overflow-wrap:anywhere;
  display:inline-block;
  vertical-align:bottom;
}

/* inline info panel */
.infoPanel {
  background:var(--bg-input);
  border:1px solid var(--hi);
  border-radius:8px;
  box-shadow:0 10px 30px var(--shadow);
  max-width:100%;
  overflow:hidden;
}

.infoTabs {
  display:flex;
  align-items:center;
  justify-content:flex-start;
  border-bottom:1px solid var(--hi);
  background:linear-gradient(90deg,#1f2329,#2a2f38);
  border-radius:8px 8px 0 0;
  position:relative;
  flex-wrap:wrap;
}

.infoTabBtn {
  background:transparent;
  border:0;
  color:var(--ink);
  font-size:12px;
  padding:6px 10px;
  cursor:pointer;
  white-space:nowrap;
}
.infoTabBtn.active {
  background:var(--btn-active-bg);
  color:#fff;
  border-radius:6px 6px 0 0;
}
.infoCloseBtn {
  margin-left:auto;
  background:transparent;
  border:0;
  color:var(--ink);
  font-size:12px;
  padding:6px 10px;
  cursor:pointer;
  opacity:.7;
  white-space:nowrap;
}
.infoCloseBtn:hover { opacity:1; }

.infoBody {
  padding:10px;
  max-height:240px; /* give it just a bit more breathing room */
  overflow:auto;
}
.infoBody p {
  margin:6px 0;
  line-height:1.4;
}
.infoBody ul {
  margin:4px 0 8px 18px;
  padding:0;
  line-height:1.4;
}
.infoBody li {
  margin-bottom:4px;
  font-size:12px;
  color:var(--ink);
}

/* status bar footer */
.statusbar {
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  align-items:flex-start;
  gap:8px;
  padding:8px 12px;
  background:var(--bg-input);
  border-top:1px solid var(--hi);
  border-radius:0 0 9px 9px;
  width:100%;
  min-width:0;
  color:var(--muted);
  font-size:12px;
  line-height:1.4;
  word-break:break-word;
}

.dot {
  width:10px;
  height:10px;
  background:#777;
  display:inline-block;
  border:1px solid #000;
  border-radius:50%;
  flex-shrink:0;
}
.dot.ok { background:var(--color-ok); }
.dot.err { background:var(--color-err); }

/* analytics table */
.table {
  background:var(--bg-input);
  color:var(--ink);
  height:320px;
  overflow:auto;
  padding:8px;
  border:1px solid var(--hi);
  border-radius:6px;
  min-width:0;
}
.table pre {
  margin:0;
  font-size:12px;
  white-space:pre;
}

/* panes (Parsed Log / Debug / Raw) */
.panes {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  width:100%;
  min-width:0;
}
@media (max-width:700px){
  .panes {
    grid-template-columns:1fr;
  }
}

.pane {
  background:var(--bg-input);
  min-height:170px;     /* was fixed height; allow content expansion */
  max-height:240px;     /* still capped so page doesn't become 10,000px */
  overflow:auto;
  padding:8px;
  border:1px solid var(--hi);
  border-radius:6px;
  min-width:0;
}
.pane pre {
  margin:0;
  font-size:12px;
  word-break:break-word;
  white-space:pre-wrap; /* prevent ultra-wide single lines from blowing layout */
}

/* misc visuals */
kbd {
  border:1px solid var(--hi);
  padding:1px 4px;
  background:var(--bg-input);
  border-radius:4px;
  font-family:inherit;
  font-size:12px;
}
.dim { color:var(--text-muted); opacity:0.7; }

.pill {
  display:inline-block;
  padding:2px 8px;
  border-radius:12px;
  font-weight:600;
  font-size:11px;
  border:1px solid transparent;
  white-space:nowrap;
}
.pill.keep {
  background:rgba(0,200,83,0.2);
  border-color:rgba(0,200,83,0.5);
  color:#a0f0c8;
}
.pill.discard {
  background:rgba(213,0,0,0.2);
  border-color:rgba(213,0,0,0.5);
  color:#f0a0a0;
}
.pill.xp{background:var(--xp-bg); border-color:var(--color-ok);}
.pill.axp{background:var(--axp-bg); border-color:var(--axp-bar);}
.pill.sk{background:var(--sk-bg); border-color:var(--sk-bar);}
.pill.rxp{background:var(--rxp-bg); border-color:#a062c4;}

.chip {
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  background:var(--bg-input);
  border:1px solid var(--hi);
  border-radius:8px;
  min-width:0;
}
.kpiVal { font-weight:bold; color:var(--text-primary); }
.kpiSub { font-size:12px; color:var(--muted); word-break:break-word; }
.kpis {
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:8px;
  width:100%;
  min-width:0;
}

/* progress cards */
.meter {
  height:10px;
  background:var(--bg-input);
  border:1px solid var(--hi);
  border-radius:8px;
  overflow:hidden;
}
.bar {
  height:100%;
  width:0%;
  transition:width 0.3s ease;
}
.bar.xp { background:var(--xp-bar); }
.bar.axp { background:var(--axp-bar); }
.bar.sk { background:var(--sk-bar); }

.cards {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  width:100%;
  min-width:0;
}
@media (max-width:700px){
  .cards {
    grid-template-columns:1fr;
  }
}
.card {
  background:var(--bg-input);
  border:1px solid var(--hi);
  padding:8px;
  border-radius:8px;
  min-width:0;
}
.card h4 {
  margin:0 0 6px 0;
  font-size:12px;
  font-weight:600;
}

.metaRow {
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:var(--muted);
  flex-wrap:wrap;
  gap:6px;
  word-break:break-word;
}

.feed {
  background:var(--bg-input);
  border:1px solid var(--hi);
  padding:6px;
  height:150px;
  overflow:auto;
  border-radius:8px;
  min-width:0;
}
.feed .line {
  font-family:var(--mono);
  font-size:12px;
  display:flex;
  flex-wrap:wrap;
  align-items:baseline;
  gap:6px;
}
.feed .when { color:var(--muted); margin-left:6px; }

.toolbar {
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  min-width:0;
}

.segment {
  display:inline-flex;
  border:1px solid var(--hi);
  border-radius:8px;
  background:var(--bg-input);
  overflow:hidden;
  flex-shrink:0;
}
.segment button {
  border:0;
  background:transparent;
  padding:5px 10px;
  cursor:pointer;
  color:var(--ink);
  border-left:1px solid var(--hi);
  white-space:nowrap;
}
.segment button:first-child { border-left:0; }
.segment button.active {
  background:var(--btn-active-bg);
  color:#fff;
}

.sumline {
  font-size:12px;
  margin-top:4px;
  color:var(--muted);
  word-break:break-word;
}

label.checkbox-row {
  cursor:pointer;
  user-select:none;
  display:flex;
  align-items:center;
  gap:4px;
  flex-wrap:nowrap;
  white-space:nowrap;
}

hr.divider {
  border:0;
  border-top:1px solid var(--hi);
  margin:10px 0;
}

/* ================================== */
/* === CLASSIC THEME (XP STYLE)   === */
/* ================================== */
body.classic {
  --bg:#c8c8c8; --panel:#dcd9d4; --face:#cfcfcf; --ink:#000; --muted:#444; --hi:#fff; --lo:#3f3f3f; --shadow:#000;
  --ok:#0a8a0a; --err:#b10000; --link:#003399;
  --xp-bg:#e7ffe7; --axp-bg:#e7f0ff; --sk-bg:#fff4e2; --rxp-bg:#f4e7ff;
  --xp-bar:#1ea31e; --axp-bar:#1a66d1; --sk-bar:#c27b17;
  --btn-active-bg:#d8e8ff;

  font-family:"MS Sans Serif",Tahoma,Segoe UI,Arial,sans-serif;
}

body.classic .window {
  background:var(--face);
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi),
    inset -2px -2px 0 var(--shadow),
    inset 2px 2px 0 #e9e9e9;
  border:none;
  border-radius:0;
  max-width:none;
  width:100%;
  margin:0;
}

body.classic .titlebar {
  background:linear-gradient(90deg,#001a66,#0b6bd6);
  color:#fff;
  font-weight:bold;
  padding:5px 8px;
  gap:8px;
  border:none;
  border-radius:0;
  flex-wrap:wrap;
}
body.classic .badge {
  background:#000;
  color:#fff;
  padding:1px 6px;
  border:1px solid #fff;
  font-weight:700;
  font-size:13px;
  border-radius:0;
  white-space:nowrap;
}
body.classic .content {
  padding:8px;
  width:100%;
  min-width:0;
}
body.classic .grid {
  grid-template-columns:320px 1fr;
  gap:10px;
}
@media (max-width:900px){
  body.classic .grid {
    grid-template-columns:1fr;
  }
}
body.classic .group {
  background:var(--panel);
  padding:8px;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  margin-bottom:10px;
  border:none;
  border-radius:0;
}
body.classic .group h3 {
  margin:0 0 6px 0;
  font-size:13px;
  font-weight:bold;
  border:none;
  padding-bottom:0;
  color:var(--ink);
}

body.classic .input,
body.classic select {
  background:#fff;
  color:#000;
  border:1px solid var(--lo);
  border-top-color:var(--hi);
  border-left-color:var(--hi);
  padding:3px 5px;
  border-radius:0;
  max-width:100%;
  min-width:0;
}
body.classic .btn {
  background:#ddd;
  color:#000;
  padding:3px 8px;
  border:1px solid var(--lo);
  border-top-color:var(--hi);
  border-left-color:var(--hi);
  font-size:13px;
  border-radius:0;
  line-height:1.2;
  white-space:nowrap;
}
body.classic .btn:active {
  border-top-color:var(--lo);
  border-left-color:var(--lo);
  border-right-color:var(--hi);
  border-bottom-color:var(--hi);
  background:#ccc;
}
body.classic .btn.alt { font-weight:bold; }
body.classic .drop {
  height:76px;
  background:#fff;
  padding:6px;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border:none;
  border-radius:0;
}
body.classic .drop.dragover { outline:1px dotted var(--ink); }

body.classic .statusbar {
  padding:6px;
  background:var(--panel);
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border:none;
  border-radius:0;
  flex-wrap:wrap;
  align-items:flex-start;
}
body.classic .dot { border-radius:0; }

body.classic .table {
  background:#fff;
  color:#000;
  height:320px;
  padding:6px;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border:none;
  border-radius:0;
}
body.classic .table pre {
  white-space:pre;
  word-break:normal;
}

body.classic .pane {
  background:#fff;
  min-height:170px;
  max-height:240px;
  overflow:auto;
  padding:8px;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border:none;
  border-radius:0;
}
body.classic .pane pre {
  word-break:break-word;
  white-space:pre-wrap;
}

body.classic kbd {
  border:1px solid #000;
  padding:0 3px;
  background:#fff;
  border-radius:0;
  font-size:12px;
  line-height:1.2;
}
body.classic .dim { color:#6f6f6f; opacity:1; }
body.classic .pill {
  border:1px solid #000;
  font-weight:bold;
  background:#fff;
  border-radius:0;
}
body.classic .pill.keep {
  background:#eaf7ea;
  border-color:#000;
  color:#000;
}
body.classic .pill.discard {
  background:#f8eaea;
  border-color:#000;
  color:#000;
}
body.classic .pill.xp{background:var(--xp-bg); border-color:#000;}
body.classic .pill.axp{background:var(--axp-bg); border-color:#000;}
body.classic .pill.sk{background:var(--sk-bg); border-color:#000;}
body.classic .pill.rxp{background:var(--rxp-bg); border-color:#000;}

body.classic .chip {
  background:#fff;
  border:1px solid #000;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border-radius:0;
}
body.classic .kpiSub { color:#333; }
body.classic .kpis {
  grid-template-columns:repeat(4,1fr);
}

body.classic .meter {
  background:#fff;
  border:1px solid #000;
  border-top-color:#fff;
  border-left-color:#fff;
  border-radius:0;
}
body.classic .card {
  background:#fff;
  border:1px solid #000;
  padding:8px;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border-radius:0;
}
body.classic .metaRow { color:var(--muted); }

body.classic .feed {
  background:#fff;
  border:1px solid #000;
  padding:6px;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  border-radius:0;
}
body.classic .feed .line {
  flex-wrap:wrap;
}
body.classic .feed .when { color:#666; }

body.classic .segment {
  border:1px solid #000;
  background:#fff;
  border-radius:0;
  flex-shrink:0;
}
body.classic .segment button {
  border:0;
  background:transparent;
  padding:3px 8px;
  color:var(--ink);
  border-left:1px solid #000;
  white-space:nowrap;
}
body.classic .segment button:first-child { border-left:0; }
body.classic .segment button.active {
  background:var(--btn-active-bg);
  color:#000;
}
body.classic hr.divider {
  border-top:1px solid var(--hi);
  margin:10px 0;
}

body.classic .infoPanel {
  background:#fff;
  border:1px solid #000;
  border-radius:0;
  box-shadow:
    inset -1px -1px 0 var(--lo),
    inset 1px 1px 0 var(--hi);
  max-width:100%;
}
body.classic .infoTabs {
  background:linear-gradient(90deg,#001a66,#0b6bd6);
  color:#fff;
  border-bottom:1px solid #000;
  border-radius:0;
  flex-wrap:wrap;
}
body.classic .infoTabBtn {
  color:#fff;
  font-weight:bold;
  font-size:12px;
  padding:4px 8px;
}
body.classic .infoTabBtn.active {
  background:#d8e8ff;
  color:#000;
  border-radius:0;
}
body.classic .infoCloseBtn {
  color:#fff;
  font-weight:bold;
  font-size:12px;
  padding:4px 8px;
}
body.classic .infoBody {
  background:#fff;
  color:#000;
  max-height:240px;
  overflow:auto;
  padding:8px;
  font-size:12px;
  line-height:1.4;
  word-break:break-word;
}
body.classic .infoBody p { margin:4px 0; }
body.classic .infoBody li { color:#000; }
